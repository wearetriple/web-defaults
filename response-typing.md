# ðŸ’¬ Response typing

Typing responses from an external API is a good practice. It helps with code completion, and allows surfacing the impact of an api change.

## DTO

DTO stands for [Data Transfer Object](https://en.wikipedia.org/wiki/Data_transfer_object).

These are the object shapes that are retrieved or sent to an external API.

## How to get them

Preferably these are generated by the external API.
If not https://quicktype.io/ or via the [vscode extension](https://marketplace.visualstudio.com/items?itemName=quicktype.quicktype) you can paste a response and it will generate the DTO's for you.
Verify the types against the documentation, sometimes fields are missing or optional.
Sometimes the data-structure is very complex and it would be time-consuming to specify all types, in that case look al what the application uses and what the app doen't use, type that as `unknown`.

## Single file

Its preferred to place the types into a single file (per external API) and only export the types that are used.
Benefit of using a big file with little exports, is that the unused types are shown in your editor and that the import signal where the type came from.

Importing types from an api-types.ts is a signal that you're building a smart component which is tied to the api.
(this isn't necessarily a bad thing, unless you're trying to build a re-usable dumb component of course)

Dumb components should not be aware of the api, they should only be aware of the data they need.

Optional: Add the `Dto` suffix to the type: `UserDto` to make it clear that this is a DTO.

# Stored in git

The files even when generated are committed to the git repository.
This is because the code in git is a snapshot in time, and if you don't include the generated types, the code will not pass linting.

It also allows for the backend to work ahead and have a temporary instable shape of the api.
The moment to include the changes is a delibarate one.
(and in mono repo setups, it also prevents issues where unrelated packages suddenly get typing errors and can't merge)

# Using the types throughout the application

Api are volatile and subject to change. Some try to prevent code changes by introducing a layer.
This adds complexity, you can no longer use the network tab to see the shape of the data.

Embrace the fact that apis change and by using typescript you can see which parts are affected by the change.
Sometimes this means doing some extra work, but it exposes the area the change is affecting.
Which is helpful, because the change was done for a reason.
