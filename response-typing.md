# ðŸ’¬ Response typing

Typing responses from an external API is a good practice. It helps with code completion and allows surfacing the impact of an API change.

## DTO

DTO stands for [Data Transfer Object](https://en.wikipedia.org/wiki/Data_transfer_object).

These are the object shapes that are retrieved or sent to an external API.

## How to get them

Preferably, these are generated by the external API. If not, you can use [quicktype.io](https://quicktype.io/) or the [VSCode extension](https://marketplace.visualstudio.com/items?itemName=quicktype.quicktype) to generate the DTOs by pasting a response. Verify the types against the documentation as sometimes fields may be missing or optional. In cases where the data structure is very complex, specifying all types may be time-consuming. In such cases, look at what the application uses and what it doesn't use, and type the unused parts as `unknown`.

## Single file

It's preferred to place the types into a single file (per external API) and only export the types that are used. The benefit of using a single file with minimal exports is that unused types are shown in your editor, and the import signals where the type came from.

Importing types from an `api-types.ts` file is a signal that you're building a smart component that is tied to the API. This isn't necessarily a bad thing unless you're trying to build a reusable dumb component, of course.

Dumb components should not be aware of the API; they should only be aware of the data they need.

Optional: Add the `Dto` suffix to the type, such as `UserDto`, to make it clear that it is a DTO.

# Stored in git

Even when generated, the files should be committed to the Git repository. This is because the code in Git is a snapshot in time, and if you don't include the generated types, the code will not pass linting.

It also allows the backend to work ahead and have a temporarily unstable shape of the API. The moment to include the changes is a deliberate one. In mono repo setups, including the generated types prevents issues where unrelated packages suddenly get typing errors and can't merge.

# Using the types throughout the application

APIs are volatile and subject to change. Some try to prevent code changes by introducing a layer. However, this adds complexity and prevents you from using the network tab to see the shape of the data.

Embrace the fact that APIs change, and by using TypeScript, you can see which parts are affected by the change. Sometimes, this means doing some extra work, but it exposes the areas that the change is affecting, which is helpful because the change was made for a reason.
